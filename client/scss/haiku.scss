@import 'variables';
@import "{francocatena:compass}/compass";

.haiku {
  position: relative;
  background-position: center center;
  background-size: cover;
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;

  ///////////////// PROPERTIES /////////////////

  //// Text Color
  &[data-text-color="white"] {
    color: $white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }
  &[data-text-color="black"] {
    color: #222;
  }

  //// Text Horizontal Alignment
  &[data-text-align="right"] {
    .haiku-text, .placeholder {
      text-align: right;
      right: 2.2rem;
      left: 0;
    }
  }
  &[data-text-align="left"] {
    .haiku-text, .placeholder {
      text-align: left;
      left: 2.2rem;
      right: 0;
    }
  }
  &[data-text-align="center"] {
    .haiku-text, .placeholder {
      text-align: center;
      left: 0;
      right: 0;
    }
  }

  //// Text Vertical Alignment
  &[data-text-valign="top"] {
    .haiku-text, .placeholder { top: 2rem; }
  }
  &[data-text-valign="bottom"] {
    .haiku-text, .placeholder { bottom: 1.5rem; }

    // IF we're including actions in the same container (as is the case
    // on the main profile page), we need to add 2rem spacing for the
    // actions bar.
    &[data-include-actions="true"] {
      .haiku-text, .placeholder { bottom: 1.5rem + 2rem; }
    }
  }
  &[data-text-valign="center"] {
    .haiku-text, .placeholder {
      top: 50%;
      transform: translateY(-50%);
    }
  }

  // Image Horizontal Position
  $horizontal-align: ('left', 'center', 'right');
  $vertical-align: ('top', 'center', 'bottom');

  @each $horizontal in $horizontal-align {
    @each $vertical in $vertical-align {
      &[data-background-align="#{$horizontal}"][data-background-valign="#{$vertical}"] {
        background-position: #{$horizontal} #{$vertical};
      }
    }
  }

  // Overlay Direction and Color
  $directions: ('top', 'bottom', 'left', 'right');

  @each $direction in $directions {
    &[data-overlay-direction="#{$direction}"][data-overlay-color="black"] {
      .visibility-gradient {
        background: linear-gradient(to #{$direction}, rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
      }
    }
    &[data-overlay-direction="#{$direction}"][data-overlay-color="white"] {
      .visibility-gradient {
        background: linear-gradient(to #{$direction}, rgba(255,255,255,0) 0%,rgba(255,255,255,0.45) 100%);
        background-blend-mode: multiply;
        -webkit-filter: blur(3px);
        filter: blur(3px);
      }
    }
  }

  // Manually adding a 'center' overlay, where it just tints the whole screen.
  &[data-overlay-direction="center"][data-overlay-color="black"] {
    .visibility-gradient {
      background: rgba(0,0,0,0.2);
      background-blend-mode: color-burn;
    }
  }
  &[data-overlay-direction="center"][data-overlay-color="white"] {
    .visibility-gradient {
      background: rgba(255,255,255,0.2);
      background-blend-mode: color-burn;
    }
  }

  #haiku-body {
    z-index: 10;
  }

  .visibility-gradient {
    position: absolute;
    z-index: 0;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .haiku-text {
    position: absolute;
    z-index: 1;
    font-size: 1.3rem;
  }
}

$footer-height: 3.2rem;

.haiku-footer {
  position: relative;
  height: $footer-height;

  .haiku-author {
    position: relative;
    white-space: nowrap;

    .portrait {
      position: relative;
      width: $footer-height*1.5;
      height: $footer-height*1.5;
      background-size: cover;
      background-position: center center;
      margin: 0 0.5rem;
      top: -$footer-height/4;
      border-radius: 100%;
      border: 3px solid $white;
    }

    .author-and-time {
      position: absolute;
      top: 0;
      left: $footer-height*1.5 + 1rem;
      bottom: 0;


      .author-name {
        position: absolute;
        top: 0.8rem;
        left: 0;
        font-size: 0.9rem;
        font-weight: 700;
        color: #333;
        line-height: 1rem;

        &:hover {
          color: darken($green, 10%);
        }
      }
      .relative-date {
        position: absolute;
        bottom: 0.6rem;
        left: 0;
        font-size: 0.7rem;
        font-weight: 300;
        color: #666;
        line-height: 0.6rem;
      }
    }
  }

  .haiku-actions {
    text-align: right;
    position: relative;
    left: 0;
    right: 0;
    bottom: 0;
    background: $white;

    li {
      display: inline-block;
      padding: 0;
      line-height: $footer-height * 1.1;
      width: 4rem;
      text-align: left;

      &.liked {
        // the user likes this haiku.
        color: $fuscia;

        button {
          color: $fuscia;
        }
      }

      button {
        position: relative;
        margin: 0;
        padding: 0;
        width: 2rem;
        height: $footer-height;
        background: transparent;
        border: 0;
        outline: none;
        color: #222;
        text-align: center;

        i { }

      }
      .count {
        font-size: 0.7rem;
        font-weight: 700;
      }



    }
  }
}

$event-row-height: 3rem;
.haiku-events {
  background: $lightgray !important;
  line-height: $event-row-height;
  padding: 2rem;

  li {
    padding: 0 1rem;
    border-bottom: 1px solid $mediumgray;
  }

  .event-icon {
    display: inline-block;
    font-size: 1.25rem;

    .fa-heart {
      color: $fuscia;
    }
  }

  .event-description {
    display: inline-block;
    padding: 0 1rem;

    strong {
      font-weight: 700;
    }
  }

  .event-timestamp {
    display: inline-block;
    float: right;
    font-size: 0.8rem;
    font-weight: 300;
    color: #555;
  }

}
