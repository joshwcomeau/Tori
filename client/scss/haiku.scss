@import 'variables';
@import "{francocatena:compass}/compass";

.haiku {
  position: relative;
  background-position: center center;
  background-size: cover;
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;

  ///////////////// PROPERTIES /////////////////

  //// Text Color
  &[data-text-color="white"] {
    color: $white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }
  &[data-text-color="black"] {
    color: #222;
  }

  //// Text Horizontal Alignment
  &[data-text-align="right"] {
    .haiku-text, .placeholder {
      text-align: right;
      right: 2.2rem;
      left: 0;
    }
  }
  &[data-text-align="left"] {
    .haiku-text, .placeholder {
      text-align: left;
      left: 2.2rem;
      right: 0;
    }
  }
  &[data-text-align="center"] {
    .haiku-text, .placeholder {
      text-align: center;
      left: 0;
      right: 0;
    }
  }

  //// Text Vertical Alignment
  &[data-text-valign="top"] {
    .haiku-text, .placeholder { top: 2rem; }
  }
  &[data-text-valign="bottom"] {
    .haiku-text, .placeholder { bottom: 1.5rem; }

    // IF we're including actions in the same container (as is the case
    // on the main profile page), we need to add 2rem spacing for the
    // actions bar.
    &[data-include-actions="true"] {
      .haiku-text, .placeholder { bottom: 1.5rem + 2rem; }
    }
  }
  &[data-text-valign="center"] {
    .haiku-text, .placeholder {
      top: 50%;
      transform: translateY(-50%);
    }
  }

  // Image Horizontal Position
  $horizontal-align: ('left', 'center', 'right');
  $vertical-align: ('top', 'center', 'bottom');

  @each $horizontal in $horizontal-align {
    @each $vertical in $vertical-align {
      &[data-background-align="#{$horizontal}"][data-background-valign="#{$vertical}"] {
        background-position: #{$horizontal} #{$vertical};
      }
    }
  }

  // Overlay Direction and Color
  $directions: ('top', 'bottom', 'left', 'right');

  @each $direction in $directions {
    &[data-overlay-direction="#{$direction}"][data-overlay-color="black"] {
      .visibility-gradient {
        background: linear-gradient(to #{$direction}, rgba(0,0,0,0) 0%,rgba(0,0,0,0.65) 100%);
      }
    }
    &[data-overlay-direction="#{$direction}"][data-overlay-color="white"] {
      .visibility-gradient {
        background: linear-gradient(to #{$direction}, rgba(255,255,255,0) 0%,rgba(255,255,255,0.45) 100%);
        background-blend-mode: multiply;
        -webkit-filter: blur(3px);
        filter: blur(3px);
      }
    }
  }

  // Manually adding a 'center' overlay, where it just tints the whole screen.
  &[data-overlay-direction="center"][data-overlay-color="black"] {
    .visibility-gradient {
      background: rgba(0,0,0,0.2);
      background-blend-mode: color-burn;
    }
  }
  &[data-overlay-direction="center"][data-overlay-color="white"] {
    .visibility-gradient {
      background: rgba(255,255,255,0.2);
      background-blend-mode: color-burn;
    }
  }

  #haiku-body {
    z-index: 10;
  }

  .visibility-gradient {
    position: absolute;
    z-index: 0;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  .haiku-text {
    position: absolute;
    font-size: 1.3rem;
  }
}

.haiku-footer {
  height: 3.2rem;
  line-height: 3.2rem;

  .haiku-actions {
    text-align: right;
    position: relative;
    left: 0;
    right: 0;
    bottom: 0;

    color: #222;
    background: $white;

    li {
      display: inline-block;
      padding: 0 1rem;

      &.liked {
        // the user likes this haiku.
        color: $fuscia;

        button {
          color: $fuscia;
        }
      }

      button {
        margin: 0;
        padding: 0;
        width: 3.2rem;
        height: 3.2rem;
        background: #F00;
        border: 0;
        outline: none;
      }


      .count {
        display: inline-block;
        padding-left: 0.5rem;
      }
    }
  }
}
